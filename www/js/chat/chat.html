<!--  
 <script id="popover.html" type="text/ng-template">
 <ion-popover-view>
    <ion-header-bar>
      <h1 class="title">Group Settings</h1>
    </ion-header-bar>
    <ion-content>
        <div class="list">
            <label class="item" ng-click="revealPolls()">
                View Live Polls
            </label>
            <label class="item" ng-click="revealList()">
                Suggest Event
            </label>
            <label class="item" ng-click="goToAddContacts()">
                Invite Contacts to Group
            </label>
        </div>
    </ion-content>
  </ion-popover-view>
  </script>

 -->
<ion-view view-title="{{ roomName }}">
    <ion-nav-buttons side="right">
        <button class="button button-icon button-clear ion-compose" ng-click="openPopover($event)">
        </button>
      </ion-nav-buttons>
    <ion-content>
        <ion-list ng-show="roomName">
                <ion-list ng-if="pollVisibility">
                Live Polls
                    <ion-item ng-repeat="poll in polls | filter: IM.textMessage" ng-click="goToPollDetail(poll)"><span>Poll for {{poll.event.name}}</span><span> Expires on {{poll.expiration.date}} at {{poll.expiration.time}}</span></ion-item>
                </ion-list>
                <ion-list ng-if="listVisibility">
                Saved Events
                    <ion-item ng-repeat="event in events | filter: IM.textMessage" ng-click="goToPoll(event)">{{event.name}}</ion-item>
                    <ion-item ng-click="createEvent()">Create Custom Event</ion-item>
                    <ion-item ng-click="goToShowtimes()">Movies</ion-item>
                    <ion-item ng-click="goToYelp()">Restaurants/Nightlife</ion-item>
                    <ion-item ng-click="goToSeatgeek()">Concerts/Sports</ion-item>
                </ion-list>
            <ion-item ng-hide="chats" class="textCenter">
                <i class="icon ion-loading-c"></i> Loading Chats
            </ion-item>
            <ion-item ng-if="chats.length == 0" class="textCenter">
                <h4>No messages in this room. Send message to start.</h4>
            </ion-item>
            <ion-item class="item-text-wrap" ng-if="!listVisibility && !pollVisibility" ng-repeat="chat in chats | orderBy:'!timestamp':true">
                <p><h4>{{chat.from}} :</h4><h3 am-time-ago="chat.timestamp" class="item-note">{{chat.userFriendlyTime}}
                </h3></p>
                
                <p>{{chat.message}}</p>
                <ion-option-button class="button-assertive" ng-click="remove(chat)">
                    Delete
                </ion-option-button>
            </ion-item>
        </ion-list>
        <ion-list ng-hide="roomName">
            <ion-item class="textCenter">
                <h4>Please select a room to chat first.</h4>
            </ion-item>
        </ion-list>
    </ion-content>
                    <ion-footer-bar ng-show="listVisibility" class="item item-input-inset">
                        <label class="item-input-wrapper">
                            <input type="text" ng-model="IM.textMessage" placeholder="Filter Events">
                        </label>
                    <!--      <button ng-hide="pollVisibility" ng-click="revealPolls()" class="button button-small button-balanced">
                            <span>Live Polls</span>
                        </button>
                        <button ng-hide="listVisibility" ng-click="revealList()" class="button button-small button-balanced">
                            <span>Suggest Event</span>
                        </button> -->
                        <button ng-click="hideList()" class="button button-small button-balanced">
                             <span>Return to Chat</span>
                        </button>
                    </ion-footer-bar>
                    
                     <ion-footer-bar ng-show="pollVisibility" class="item item-input-inset">
                        <label class="item-input-wrapper">
                            <input type="text" ng-model="IM.textMessage" placeholder="Filter Live Polls">
                        </label>
                    <!--      <button ng-hide="pollVisibility" ng-click="revealPolls()" class="button button-small button-balanced">
                            <span>Live Polls</span>
                        </button>
                        <button ng-hide="listVisibility" ng-click="revealList()" class="button button-small button-balanced">
                            <span>Suggest Event</span>
                        </button> -->
                        <button ng-click="hidePoll()" class="button button-small button-balanced">
                             <span>Return to Chat</span>
                        </button>
                    </ion-footer-bar>


                    <ion-footer-bar ng-show="chatVisibility" class="item item-input-inset">
                        <label class="item-input-wrapper">
                            <input type="text" ng-model="IM.textMessage" placeholder="Type in your message...">
                        </label>
                        <button ng-click="sendMessage(IM.textMessage)" class="button button-small button-balanced">
                            Send 
                        </button>
                    <!--      <button ng-hide="pollVisibility" ng-click="revealPolls()" class="button button-small button-balanced">
                            <span>Live Polls</span>
                        </button>
                        <button ng-hide="listVisibility" ng-click="revealList()" class="button button-small button-balanced">
                            <span>Suggest Event</span>
                        </button> -->
                    </ion-footer-bar>
<!--         <button ng-click="goToAddContacts()">Add Contacts</button>
 -->    
    </ion-content>
</ion-footer-bar>

</ion-view>




<!-- <ion-view view-title="Chats">
  <ion-content>
    <div class="list">
      <a class="item item-avatar" ng-repeat="chat in chats">
        <img>
        <h2>{{chat.user}}</h2>
        <p>{{chat.message}}</p>
      </a>
    </div>
    <form>
      <div class="list">
        <div class="item item-input-inset">
          <label class="item-input-wrapper">
            <input type="text" placeholder="Message" ng-model="chat.message">
          </label>
          <button class="button button-positive ion ion-ios7-chatbubble" ng-click="sendChat(chat)"></button>
        </div>
      </div>
  </ion-content>
</ion-view> -->