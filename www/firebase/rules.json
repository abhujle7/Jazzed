// {
//     "rules": {
//       "users": {
//         "$user_id": {
//           ".read" : "auth !== null && $user_id === auth.uid",
//           "groups": {
//             "$group_id": {
//               ".validate": "root.child('groups/' + $group_id).exists()"
//             }  
//           }
//         }
//       },
//       "groups": {
//         ".write": "auth !== null",
//         "$group_id": {
//           ".read": "data.child('members').child(auth.uid).exists()",
//           ".validate": "newData.hasChildren(['name'])",
//           "name": {
//             ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length < 20"
//           },
//           "members": {
//             ".write": "root.child('users/' + auth.uid + '/groups/' + $group_id).exists()",
//             "$user_id": {
//               ".validate": "root.child('users/' + $user_id).exists()"
//             }
//           }
//         }
//       },
//       "messages": {
//         "$group_id": {
//           ".read": "root.child('groups/' + $group_id + '/members/' + auth.uid).exists()",
//           ".validate": "root.child('groups/' + $group_id).exists()",
//           "$message_id": {
//             ".write": "root.child('groups/' + $group_id + '/members/' + auth.uid).exists() && !data.exists() && newData.exists()",
//             ".validate": "newData.hasChildren(['user', 'message', 'timestamp'])",
//             "user": {
//               ".validate": "newData.val() === auth.uid"
//             },
//             "message": {
//                 ".validate": "newData.isString()"
//             },
//             "timestamp": {
//               ".validate": "newData.val() <= now"
//             },
//             "$other": {".validate": false}
//           }
//         }
//       },
//       "consensus": {
//         "$group_id" : {
//           ".read": "root.child('groups/' + $group_id + '/members/' + auth.uid).exists()",
//           ".validate": "root.child('groups/' + $group_id).exists()",
//           "$consensus_id": {
//             ".write": "root.child('groups/' + $group_id + '/members/' + auth.uid).exists() && !data.exists() && newData.exists()",
//             ".validate": "newData.hasChildren(['user', 'poll', 'timestamp'])",
//             "user": {
//               ".validate": "newData.val() === auth.uid"
//             },
//             "poll": {
//               "$poll_options": {
//                 ".validate": "(newData.hasChildren(['name', 'votes']) ) ",
//                 "name": {".validate": "newData.isString()"},
//                 "votes": {".validate": "newData.isNumber()"}
//               }
//             },
//             "timestamp": {
//               ".validate": "newData.val() <= now"
//             },
//             "$other": {".validate": false}
//           }
//         }
//       },
//       "events": {
//         "fixed": {
//           "$event_id": {
//             ".validate": "(data.child('name').exists()) && (newData.exists() && newData.hasChildren(['time', 'location']))",
//             "name": {
//               ".validate": "newData.val().length < 20 && newData.val().length > 0"
//             },
//             "time": {
//               ".validate": "newData.val() <= now"
//             },
//             "location": {
//               ".validate": "newData.hasChildren(['name', 'coordinates'])",
//               "name": {".validate": "newData.isString() && newData.val().length < 20"},
//               "coordinates": {
//                 ".validate": "newData.val().length === 2  || data.val().length === 2"
//               } 
//             }
//           }
//         },
//         "custom": {
//           "$group_id": {
//             ".write": "root.child('groups/' + $group_id + '/members/' + auth.uid).exists()",
//             ".validate": "root.child('groups/' + $group_id).exists()",
//             "$event_id": {
//               ".validate": "(data.child('name').exists()) || (!data.exists() && newData.exists() && newData.hasChildren(['name', 'time', 'location']))",
//               "name": {
//                 ".validate": "newData.val().length < 20 && newData.val().length > 0"
//               },
//               "time": {
//                 ".validate": "newData.val() <= now"
//               },
//               "location": {
//                 ".validate": "newData.hasChildren(['name', 'coordinates'])",
//                 "name": {".validate": "newData.isString() && newData.val().length < 20"},
//                 "coordinates": {
//                   ".validate": "newData.val().length === 2  || data.val().length === 2"
//                 } 
//               }
//             }
//           }
//         }
//       }
//     }
// }